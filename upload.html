<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Emigration Record</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1>Create Emigration Record</h1>
        <form id="emigrationForm" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="surName" class="form-label">Surname</label>
                <input type="text" class="form-control" id="surName" name="surName" required>
            </div>
            <div class="mb-3">
                <label for="GivenName" class="form-label">Given Name</label>
                <input type="text" class="form-control" id="GivenName" name="GivenName" required>
            </div>
            <div class="mb-3">
                <label for="Nationality" class="form-label">Nationality</label>
                <input type="text" class="form-control" id="Nationality" name="Nationality" required>
            </div>
            <div class="mb-3">
                <label for="PassportNumber" class="form-label">Passport Number</label>
                <input type="text" class="form-control" id="PassportNumber" name="PassportNumber" required>
            </div>
            <div class="mb-3">
                <label for="ExpiryDate" class="form-label">Passport Expiry Date</label>
                <input type="date" class="form-control" id="ExpiryDate" name="ExpiryDate" required>
            </div>
            <div class="mb-3">
                <label for="TypeOfVisa" class="form-label">Type of Visa</label>
                <input type="text" class="form-control" id="TypeOfVisa" name="TypeOfVisa" required>
            </div>
            <div class="mb-3">
                <label for="issuedDateType" class="form-label">Issued Date Type</label>
                <select class="form-select" id="issuedDateType" name="issuedDateType">
                    <option value="true">Automatic</option>
                    <option value="false">Manual</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="CompanyName" class="form-label">Company Name</label>
                <input type="text" class="form-control" id="CompanyName" name="CompanyName" required>
            </div>
            <div class="mb-3">
                <label for="StatusOfApplication" class="form-label">Status of Application</label>
                <select class="form-select" id="StatusOfApplication" name="StatusOfApplication">
                    <option value="Pending">Pending</option>
                    <option value="Approved">Approved</option>
                    <option value="Rejected">Rejected</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="passportImage" class="form-label">Passport Image(s)</label>
                <input type="file" class="form-control" id="passportImage" name="file-1" multiple required>
            </div>
            <div class="mb-3">
                <label for="profilePic" class="form-label">Profile Picture(s)</label>
                <input type="file" class="form-control" id="profilePic" name="file-2" multiple required>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>

    <!-- Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        document.getElementById('emigrationForm').addEventListener('submit', async function (event) {
            event.preventDefault();
            try {
                const formData = new FormData(this);
                const response = await axios.post('https://emigration.onrender.com/create-emigration', formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                });
                console.log(response.data);
                // Handle success response if needed
            } catch (error) {
                console.error(error);
                // Handle error response if needed
                if (error.response) {
                    console.error("Server responded with status", error.response.status);
                    console.error("Server responded with data", error.response.data);
                } else if (error.request) {
                    console.error("No response received from server", error.request);
                } else {
                    console.error("Error in request setup", error.message);
                }
            }
        });
    </script>
</body>

</html>